# Marketing Assistant UI - Google Ads Chatbot Integration

This project integrates with a Google Ads chatbot API to provide AI-powered advertising insights and optimization recommendations.

## Features

- **Google Ads Chatbot**: AI-powered chat interface for Google Ads analysis
- **Google AI Chat**: New comprehensive chat interface with rich content support
- **Session Management**: Automatic chat session creation and management
- **Real-time Responses**: Live integration with backend chatbot API
- **Action Items**: Interactive buttons for quick actions and recommendations
- **Platform Support**: Support for Google Ads, Google AI Chat, and Meta Ads platforms
- **Rich Content Types**: Support for text, tables, lists, charts, metrics, and actions

## Google Ads Chatbot Integration

The chatbot integrates with the following API endpoints:

### 1. Create Chat Session
- **Endpoint**: `POST /google-ads-new/api/chat/sessions/create/`
- **Purpose**: Creates a new chat session for the user
- **Request Body**: `{ "title": "Session Title" }`
- **Response**: Returns a session ID for subsequent messages

### 2. Send Chat Message
- **Endpoint**: `POST /google-ads-new/api/chat/message/`
- **Purpose**: Sends user messages and receives AI responses
- **Request Body**: `{ "message": "User message", "session_id": "session_id" }`
- **Response**: AI-generated response with blocks, actions, and intent analysis

### 3. Get Chat Sessions
- **Endpoint**: `GET /google-ads-new/api/chat/sessions/`
- **Purpose**: Retrieves all chat sessions for the user

### 4. Get Chat History
- **Endpoint**: `GET /google-ads-new/api/chat/sessions/{session_id}/`
- **Purpose**: Retrieves chat history for a specific session

### 5. Delete Session
- **Endpoint**: `DELETE /google-ads-new/api/chat/sessions/{session_id}/delete/`
- **Purpose**: Deletes a specific chat session

### 6. Account Summary
- **Endpoint**: `GET /google-ads-new/api/account-summary/`
- **Purpose**: Retrieves Google Ads account summary information

## Response Format Structure

The AI responses follow this structure:

```json
{
  "success": true,
  "session_id": "session_id",
  "response": {
    "blocks": [
      {
        "type": "text|table|list|actions|chart|metric|image",
        "content": "Response content",
        "style": "paragraph|heading|highlight",
        "title": "Block title",
        "items": [
          {
            "id": "action_id",
            "label": "Action Label"
          }
        ]
      }
    ],
    "session_id": null,
    "metadata": null
  },
  "intent": {
    "action": "INTENT_ACTION",
    "confidence": 0.95,
    "parameters": {},
    "requires_auth": true
  }
}
```

## Content Block Types

### Text Block
- **Type**: `text`
- **Styles**: `paragraph`, `heading`, `highlight`
- **Features**: Rich text formatting with different styles

### Table Block
- **Type**: `table`
- **Features**: Sortable columns, responsive design, hover effects

### List Block
- **Type**: `list`
- **Styles**: `dotted`, `numbered`, `bulleted`
- **Features**: Multiple list formats for different content types

### Action Block
- **Type**: `actions`
- **Features**: Interactive buttons for user actions
- **Examples**: Connect accounts, create campaigns, view reports

### Chart Block
- **Type**: `chart`
- **Chart Types**: `pie`, `bar`, `line`
- **Features**: Data visualization with labels and datasets

### Metric Block
- **Type**: `metric`
- **Features**: Key performance indicators with trends
- **Trend Indicators**: Up, down, neutral with visual icons

### Google Ads Analysis Blocks
- **Type**: Various analysis types for comprehensive Google Ads insights
- **Features**: Specialized analysis components with rich data display

#### Available Analysis Types:
- **`budget_optimizations`**: Budget optimization recommendations
- **`campaign_consistency_analysis`**: Keyword-ad consistency and ad group alignment
- **`sitelink_analysis`**: Sitelink presence and optimization analysis
- **`landing_page_analysis`**: Landing page URL functionality and keyword relevance
- **`duplicate_keyword_analysis`**: Duplicate keywords across campaigns and ad groups
- **`keyword_trends_analysis`**: High-potential keywords with increasing search volume
- **`auction_insights_analysis`**: Competition and competitor ad strategies
- **`search_term_analysis`**: Search terms for negative keyword opportunities
- **`ads_showing_time_analysis`**: Hour-of-day performance for bid optimization
- **`device_performance_detailed_analysis`**: Device performance for bid adjustments
- **`location_performance_analysis`**: City-level performance and optimization
- **`landing_page_mobile_analysis`**: Mobile speed score and optimization
- **`tcpa_optimizations`**: Target CPA optimization recommendations
- **`budget_allocation_optimizations`**: Campaign budget allocation optimization
- **`negative_keyword_suggestions`**: Negative keyword exclusion suggestions

### RAG Enhanced Responses
- **Type**: `rag_enhanced_response`
- **Features**: Knowledge base integration with AI responses
- **Benefits**: Enhanced accuracy, context-aware responses, source attribution
- **Metadata**: Context usage, source documents, selection reasoning

## Platform Tabs

### 1. Google Ads
- Traditional chat interface with session management
- Quick action buttons for common queries
- Performance analysis and optimization recommendations

### 2. Google AI Chat (NEW)
- Comprehensive AI chat interface
- Support for all content block types
- Rich media and interactive elements
- Session management and history
- Real-time chat with AI responses
- **Quick Action Buttons**: Pre-built buttons for common Google Ads analysis tasks
  - **Optimize Campaign**: Campaign optimization recommendations
  - **Check Consistency**: Keyword-ad consistency analysis
  - **Check Sitelinks**: Sitelink optimization analysis
  - **Keyword Trends**: Keyword performance trend analysis

### 3. Meta Ads
- Meta Ads specific chat interface
- Campaign analysis and optimization
- Performance insights and recommendations

## Getting Started

1. **Install Dependencies**:
   ```bash
   npm install
   ```

2. **Start Development Server**:
   ```bash
   npm run dev
   ```

3. **Access the Application**:
   - Open your browser to the local development URL
   - Navigate between Google Ads, Google AI Chat, and Meta Ads tabs
   - The Google AI Chat will automatically create new sessions
   - Start chatting with the AI about your advertising performance

## API Configuration

The application is configured to connect to `http://localhost:8000` by default. Update the `API_BASE_URL` in `src/constants/index.ts` if your backend is running on a different port or host.

## Authentication

The chatbot requires a valid Bearer token for authentication. The token should be stored in localStorage as `accessToken` and will be automatically included in API requests.

## Quick Actions

The interface includes predefined quick action buttons:
- **Performance Report**: Get comprehensive campaign analysis
- **Optimization**: Find improvement opportunities
- **Quick Fixes**: Identify immediate issues requiring attention

## Error Handling

The application includes comprehensive error handling for:
- Session creation failures
- Message sending errors
- Network connectivity issues
- Authentication problems
- API endpoint failures

## Development

- **Frontend**: React + TypeScript + Vite
- **Styling**: Tailwind CSS
- **HTTP Client**: Axios with automatic token refresh
- **Icons**: Lucide React
- **Chat Components**: Modular block-based rendering system
- **RAG Testing**: Built-in testing panel for RAG functionality validation

## Build

```bash
npm run build
```

## Linting

```bash
npm run lint
```

## Architecture

### Components Structure
```
src/
├── components/
│   ├── ChatInterface.tsx          # Main chat interface
│   ├── AIChatBox.tsx              # New Google AI Chat component with RAG support
│   ├── AnalysisBlock.tsx          # RAG and analysis block renderer
│   ├── RAGTestPanel.tsx           # RAG functionality testing panel
│   ├── ChatBlocks/                # Content block components
│   │   ├── TextBlock.tsx
│   │   ├── TableBlock.tsx
│   │   ├── ListBlock.tsx
│   │   ├── ActionBlock.tsx
│   │   ├── ChartBlock.tsx
│   │   ├── MetricBlock.tsx
│   │   └── index.ts
│   └── Header.tsx                 # Platform switcher
├── services/
│   ├── api.ts                     # Main API service
│   └── chatApi.ts                 # Chat-specific API service
└── types/
    └── index.ts                   # TypeScript type definitions with RAG types
```

### Key Features
- **Modular Design**: Each content block type has its own component
- **Responsive Layout**: Mobile-first design with responsive breakpoints
- **Real-time Updates**: Live chat with automatic scrolling
- **Session Persistence**: Chat sessions maintained across page reloads
- **Error Recovery**: Graceful error handling with retry mechanisms
- **RAG Integration**: Knowledge base enhanced AI responses
- **Analysis Blocks**: Comprehensive Google Ads analysis components
- **Testing Tools**: Built-in RAG testing and validation