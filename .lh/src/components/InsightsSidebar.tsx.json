{
    "sourceFile": "src/components/InsightsSidebar.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1755696166463,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1755696166463,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from 'react';\nimport { TrendingUp, AlertTriangle, Zap, Clock, ArrowUp, ArrowDown } from 'lucide-react';\nimport { Platform, GoogleAdsAccountSummary } from '../types';\nimport AccountSummary from './AccountSummary';\nimport authService from '../services/authService';\n\ninterface InsightsSidebarProps {\n  platform: Platform;\n}\n\nconst InsightsSidebar: React.FC<InsightsSidebarProps> = ({ platform }) => {\n  const [accountSummary, setAccountSummary] = useState<GoogleAdsAccountSummary | null>(null);\n  const [isLoadingSummary, setIsLoadingSummary] = useState(false);\n\n  // Fetch account summary when platform is Google Ads\n  useEffect(() => {\n    const fetchAccountSummary = async () => {\n      if (platform === 'google') {\n        setIsLoadingSummary(true);\n        try {\n          const result = await authService.getGoogleAdsAccountSummary();\n          if (result.success && result.data) {\n            setAccountSummary(result.data);\n          }\n        } catch (error) {\n          console.error('Failed to fetch account summary:', error);\n        } finally {\n          setIsLoadingSummary(false);\n        }\n      } else {\n        // Clear account summary when switching away from Google Ads\n        setAccountSummary(null);\n      }\n    };\n\n    fetchAccountSummary();\n  }, [platform]);\n\n  const insights = [\n    {\n      type: 'performance',\n      icon: TrendingUp,\n      title: 'ROAS Trending Up',\n      value: '+30%',\n      change: 'positive',\n      time: '38m ago',\n      description: 'Return on ad spend increased significantly'\n    },\n    {\n      type: 'alert',\n      icon: AlertTriangle,\n      title: 'High CPM Alert',\n      value: '+45%',\n      change: 'negative',\n      time: '1h ago',\n      description: 'Cost per mille requires immediate attention'\n    },\n    {\n      type: 'optimization',\n      icon: Zap,\n      title: 'Budget Reallocation',\n      value: '12%',\n      change: 'neutral',\n      time: '2h ago',\n      description: 'Opportunity to optimize budget distribution'\n    },\n    {\n      type: 'performance',\n      icon: TrendingUp,\n      title: 'CTR Improvement',\n      value: '+15%',\n      change: 'positive',\n      time: '3h ago',\n      description: 'Click-through rate showing steady growth'\n    },\n    {\n      type: 'alert',\n      icon: AlertTriangle,\n      title: 'Conversion Rate Drop',\n      value: '-8%',\n      change: 'negative',\n      time: '4h ago',\n      description: 'Monitor landing page performance'\n    }\n  ];\n\n  const getInsightStyle = (type: string) => {\n    switch (type) {\n      case 'alert':\n        return 'border-l-red-500 bg-red-50';\n      case 'optimization':\n        return 'border-l-blue-500 bg-blue-50';\n      case 'performance':\n        return 'border-l-green-500 bg-green-50';\n      default:\n        return 'border-l-gray-500 bg-gray-50';\n    }\n  };\n\n  const getBadgeStyle = (type: string) => {\n    switch (type) {\n      case 'alert':\n        return 'bg-red-100 text-red-800';\n      case 'optimization':\n        return 'bg-blue-100 text-blue-800';\n      case 'performance':\n        return 'bg-green-100 text-green-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  return (\n    <div className=\"w-80 bg-white border-l border-gray-200 p-6 overflow-y-auto\">\n      {/* Account Summary - Only show for Google Ads */}\n      {platform === 'google' && (\n        <div className=\"mb-6\">\n          {isLoadingSummary ? (\n            <div className=\"bg-white rounded-lg border border-gray-200 p-4 animate-pulse\">\n              <div className=\"h-4 bg-gray-200 rounded mb-3\"></div>\n              <div className=\"grid grid-cols-3 gap-4\">\n                <div className=\"h-12 bg-gray-200 rounded\"></div>\n                <div className=\"h-12 bg-gray-200 rounded\"></div>\n                <div className=\"h-12 bg-gray-200 rounded\"></div>\n              </div>\n            </div>\n          ) : accountSummary ? (\n            <AccountSummary \n              summary={accountSummary} \n              onRefresh={() => {\n                setIsLoadingSummary(true);\n                authService.getGoogleAdsAccountSummary().then(result => {\n                  if (result.success && result.data) {\n                    setAccountSummary(result.data);\n                  }\n                }).finally(() => {\n                  setIsLoadingSummary(false);\n                });\n              }}\n              isLoading={isLoadingSummary}\n            />\n          ) : null}\n        </div>\n      )}\n\n      {/* Header */}\n      <div className=\"flex items-center space-x-2 mb-6\">\n        <TrendingUp className=\"w-5 h-5 text-blue-600\" />\n        <h2 className=\"text-lg font-semibold text-gray-900\">Insights & Suggestions</h2>\n      </div>\n\n      {/* Real-time Status */}\n      <div className=\"mb-6 p-3 bg-green-50 border border-green-200 rounded-lg\">\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n          <span className=\"text-sm font-medium text-green-800\">Live Monitoring Active</span>\n        </div>\n        <p className=\"text-xs text-green-600 mt-1\">Last updated: 2 minutes ago</p>\n      </div>\n\n      {/* Insights List */}\n      <div className=\"space-y-4\">\n        {insights.map((insight, index) => {\n          const Icon = insight.icon;\n          return (\n            <div\n              key={index}\n              className={`border-l-4 ${getInsightStyle(insight.type)} p-4 rounded-r-lg hover:shadow-sm transition-shadow cursor-pointer`}\n            >\n              <div className=\"flex items-start justify-between mb-2\">\n                <div className=\"flex items-center space-x-2\">\n                  <Icon className=\"w-4 h-4 text-gray-600\" />\n                  <span className={`px-2 py-1 text-xs font-medium rounded-full ${getBadgeStyle(insight.type)}`}>\n                    {insight.type.toUpperCase()}\n                  </span>\n                </div>\n                <div className=\"flex items-center space-x-1 text-xs text-gray-500\">\n                  <Clock className=\"w-3 h-3\" />\n                  <span>{insight.time}</span>\n                </div>\n              </div>\n              \n              <h3 className=\"font-semibold text-gray-900 mb-1\">{insight.title}</h3>\n              \n              <div className=\"flex items-center space-x-2 mb-2\">\n                <span className={`font-bold ${\n                  insight.change === 'positive' ? 'text-green-600' : \n                  insight.change === 'negative' ? 'text-red-600' : 'text-gray-600'\n                }`}>\n                  {insight.value}\n                </span>\n                {insight.change === 'positive' && <ArrowUp className=\"w-3 h-3 text-green-600\" />}\n                {insight.change === 'negative' && <ArrowDown className=\"w-3 h-3 text-red-600\" />}\n              </div>\n              \n              <p className=\"text-sm text-gray-600\">{insight.description}</p>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Quick Stats */}\n      <div className=\"mt-8 p-4 bg-gray-50 rounded-lg\">\n        <h3 className=\"font-semibold text-gray-900 mb-3\">Quick Stats</h3>\n        <div className=\"space-y-3\">\n          <div className=\"flex justify-between\">\n            <span className=\"text-sm text-gray-600\">Active Campaigns</span>\n            <span className=\"text-sm font-semibold text-gray-900\">24</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span className=\"text-sm text-gray-600\">Total Spend (24h)</span>\n            <span className=\"text-sm font-semibold text-gray-900\">$12,450</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span className=\"text-sm text-gray-600\">Avg. ROAS</span>\n            <span className=\"text-sm font-semibold text-green-600\">3.8x</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span className=\"text-sm text-gray-600\">Conversions</span>\n            <span className=\"text-sm font-semibold text-gray-900\">1,247</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default InsightsSidebar;"
        }
    ]
}